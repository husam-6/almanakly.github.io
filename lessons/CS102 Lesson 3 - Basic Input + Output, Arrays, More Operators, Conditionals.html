
<html>
<head>
  <meta charset="utf-8">
  <title>Lesson 3 - Basic Input + Output, Arrays, More Operators, Conditionals</title>
	<link rel="stylesheet" href="../assets/css/slides.css">
  <script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>

</head>
<body>

<textarea id="source">
# Basic IO, Arrays, More Operators, Conditionals

TB: 1.5 - 1.6, 1.9
2.9-2.11
3.1-3.4

---

## File and Character Processing 

- It's often important to read in input to a program
- There a few different ways you can do this
  - Command line arguments 
  - File processing 

Think of these programs as processing streams of character

---

## File and Character Processing

- A text stream is a sequence of characters divided into lines
- Each line consists of zero or more characters followed by a newline character
- There are a few standard library functions in C you can use 
- `getchat()` and `putchar` 

---

## Example Program 

```
#include <stdio.h>
/* copy input to output; 1st version */
int main() {
  int c;
  c = getchar();
  while (c != EOF) {
    putchar(c);
    c = getchar();
  }
}
```

Note the type of C here. We can also write this alot cleaner in C (the assignment is an expression...)

---

## Character Counting

```
#include <stdio.h>
/* count characters in input; 1st version */
int main() {
  long nc;
  nc = 0;
  while (getchar() != EOF)
    ++nc;
  printf("%ld\n", nc);
}
```

Not a crazy example but introduces a new operator. Similar functionality

---

## Arrays

- An array is a contiguous block of memory
- Variables have a spot of memory - an array is just a bunch of them together 

---

## Arrays

```
+-----------+
|    x      |   <-- A variable, has its own memory slot
|  value: 7 |
+-----------+

Index:    0       1       2       3       4
        +-------+-------+-------+-------+-------+
Array:  |  10   |  20   |  30   |  40   |  50   |
        +-------+-------+-------+-------+-------+
Memory: 1000    1004    1008    1012    1016   (example addresses)
```

---

## Arrays

In C you declare an array with [] notation 

```
int array[10]
```

---

## Arrays

```
#include <stdio.h>

int main() {
  int array[10];
  array[0] = 10;
  array[1] = 300;
  array[2] = -2025;

  printf("Array elements in order: %d, %d, %d\n", array[0], array[1], array[2]);
}
```

---

## Arrays

- In C and most programming languages (except some like MATLAB) indexing starts at 0
  - NOTE - MATLAB does not because of math!
- Arrays are super useful and we will explore them more when we discuss loops further 

---

## Note on Function Definitions

- We've discussed and used functions, but haven't formally defined them 

```
return-type function-name(parameter declarations, if any)
{
  declarations
  statements
}
```

---

## Note on function Definitions

- The top is the **signature**. This is what you use to declrae a function as well
- eg `int main()` is the signature of main, it takes no arguments and returns an int. 

---

## Call by value

- In C functions are what we call **call by value**
- When you pass in a variable, the original is unchanged. You are passing in a *copy*

---

## Call by value 

```
#include <stdio.h>

void messWithVariables(int a, int b) {
  a = a * 1000;
  b = b - 1000; 
  printf("Updated a: %d, b: %d\n", a, b);
}


int main() {
  int a = 10;
  int b = 40; 
  messWithVariables(a, b);
  printf("After function call: a: %d, b: %d\n", a, b);
}
```

You can still manipulate input by using pointers. We will discuss that later

---

## Scope 

- A variable has a scope - this is where it is *visible* 
- *local* variables are local only to the function its within, no other function can access. 
- Local variables comes into existence when the function calls and then dissapears upon exit
- Because of this, they need to always be set or they can contain garbage! 

---

## Scope
```
#include <stdio.h>

int main() {
  int a;
  printf("%d\n", a);
}
```

---

## Scope

- You can define *global* / *external* variables if you need something to be accessible in multiple places 
- These need to be defined exactly once, and declared when you want to access (this can be implicit though in many cases, like when defined in the same file)
- This is done using the `extern` keyword


---

## Scope
```
#include <stdio.h>

int a = 1;

void doSomething() {
    a = a * 2;
}

void doSomethingElse() {
    a = a * -1;
}

int main() {
  printf("Global a at start: %d\n", a);

  doSomething();
  printf("After calling doSomething(): %d\n", a);

  doSomethingElse();
  printf("After calling doSomethignElse(): %d\n", a);
}
```

---

## Bitwise Operators 

- Last week we talked a bit about relational operators - these are an extension
- In C there are 6 bit manipulation operators

---

## Bitwise Operators

- `&` bitwise AND
- `|` bitwise inclusive OR
- `^` bitwise exclusive OR
- `<<` left shift
- `>>` right shift
- `~` one's complement (unary)

---

## Bitwise Operators 

- You can use these alot of the time to do clever operations
- You should think of the actual number in binary 

---

## Bitwise Operators

```
n = n & 0177;
x = x | SET_ON;
```

- 0177 is octal (0 at the start of a number makes it octal, this is 127)
- Keep only the first 7 bits (01111111)
- Similarly `|` can be used to 'turn on' bits in the second example

---

## Bitwise Operators
```
z = z << 1
```

- Shift operators are neat because they can replace mathematical operations and they are more efficient! 
- The above example shifts bits over 1 space, meaning its effectively a multiplication by 2 (think binary)

---

## Assignment Operator 

- We've already seen plenty of examples of an assignment  
- Another neat operation we have in C and in many programming languages is the assignment operator

```
i = i + 2
i += 2
```

---

## Conditional Expressions

- We have seen examples of expressions having a value 
- ie

```
while ((c = getchar()) != EOF)
```

---

## Conditional Expressions

- In any programming language you will need some sort of construct to check conditions
- In C, this comes in the form of `if` and `if-else` statements
- They are used to express 'decisions' or checks 
- *if this is true, do this*

---

## Conditional Expressions

```
if (something)
  statement1
else
  statement2
```

- A statement is any expression followed by a semicolon
- Braces group declarations and statements into compound statements or blocks

---

## Conditional Expressions

- You can also have an `else if` statement 

```
if (something){
  statement1
} else if (something else) {
  statement2
} else {
  statement3
}
```

Note braces and when they are necessary (first statement or group of statements)

---

## Conditional Expressons

- Two more types of conditional expressions which are super common
- `switch` statement
- Ternary operators

---

## Conditional Expressions

```
switch (expression) {
  case const-expr: 
    statements
  case const-expr: 
    statements
  default: 
    statements
}
```

---

## Conditional Expressions

```
expr1 ? expr2 : expr
```

This is super useful and compact, used in many languages like Javascript

---

## Character Arrays

- An obvious usecase for arrays are char arrays 
- Let's look at an example from the textbook 

---

## Character Arrays

```
#include <stdio.h>
#define MAXLINE 1000 /* maximum input line length */

int getline_custom(char line[], int maxline);
void copy(char to[], char from[]);

int main(void)
{
    int len;              /* current line length */
    int max;              /* maximum length seen so far */
    char line[MAXLINE];   /* current input line */
    char longest[MAXLINE];/* longest line saved here */
    max = 0;
    while ((len = getline_custom(line, MAXLINE)) > 0) {
        if (len > max) {
            max = len;
            copy(longest, line);
        }
    }
    if (max > 0) { /* there was a line */
        printf("%s", longest);
    }
    return 0;
}
```

---

## Character Arrays

```
/* getline_custom: read a line into s, return length */
int getline_custom(char s[], int lim)
{
    int c, i;

    i = 0;
    while (i < lim - 1) {
        c = getchar();
        if (c == EOF || c == '\n')
            break;
        s[i] = c;
        ++i;
    }

    if (c == '\n') {
        s[i] = c;
        ++i;
    }

    s[i] = '\0';
    return i;
}
```

---

## Character Arrays

```
/* copy: copy 'from' into 'to'; assume to is big enough */
void copy(char to[], char from[])
{
    int i = 0;
    while ((to[i] = from[i]) != '\0') {
        ++i;
    }
}

```

---

## Character Arrays 

```
Index:   0   1   2   3   4    5    6
        +---+---+---+---+---+----+----+
Array:  | h | e | l | l | o | \n | \0 |
        +---+---+---+---+---+----+----+
```

---

</textarea> <script> var slideshow = remark.create(); </script> </body> </html>
